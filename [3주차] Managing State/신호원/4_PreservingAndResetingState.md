# state 보존
리액트는 JSX로부터 UI 트리를 만들어내고 React DOM이 해당 트리와 일치하도록 DOM 트리를 업데이트한다.

state는 컴포넌트 내부에 저장되는 것이 아니라 리액트 내부에서 관리된다. 리액트는 컴포넌트의 UI 트리에서의 위치에 따라 state를 연결시켜준다.
이 때 같은 컴포넌트에서 정의된 state라도 렌더링된 컴포넌트의 위치가 UI 트리 내에서 다르다면 state는 완전히 독립적으로 작동한다.

리액트는 동일한 위치의 같은 컴포넌트가 렌더링되는 한 state를 유지하고 DOM 요소를 재사용한다. 만약 컴포넌트가 제거되거나 다른 컴포넌트로 대체된다면 state는 제거된다.
이때 위치는 JSX가 아닌 UI 트리 내에서 위치이다. 컴포넌트가 조건에 따른 복수의 반환문을 갖더라도 파싱 후 UI 트리에서의 위치가 같다면 별개로 인식되지 않는다.

리액트가 컴포넌트의 동일성을 체크하는 방법은 컴포넌트 함수의 참조값이다. 컴포넌트를 타 컴포넌트 내부에서 정의할 경우 참조값이 렌더링 때마다 바뀌므로 위치와 이름이 같더라도 state를 초기화한다.

# state 초기화
같은 컴포넌트들을 전환하면서 의도적으로 state를 초기화하고 싶은 상황이 있을 수 있다.
- 컴포넌트를 다른 위치에 렌더링

삼항연산자가 아니라 && 연산자를 사용해 연속해서 놓으면 이는 UI 트리 내에서 형제로 인식된다. 때문에 조건부 렌더링으로 하나만 나타나더라도 전환하면서 state는 초기화된다.

- key 속성 사용하기

더 일반적으로 컴포넌트에 key 속성을 다르게 지정해서 리액트가 다른 컴포넌트로 인식하도록 할 수 있다. key 속성이 부여되어 있으면 리액트는 부모 내 순서가 아닌 key 자체를 위치의 일부로 사용하도록 지시한다.

# state 유지
위 내용은 state를 재사용한다는 것이다. 단일 컴포넌트는 재랜더링되면서 state가 삭제된다. 만약 컴포넌트를 숨겼다가 다시 나타나게 할 때 state를 유지하고 싶다면 다른 방법이 있다.

- CSS로 숨기기
- state를 부모로 끌어올리기
- localStorage 등의 외부 저장소 사용하기
  