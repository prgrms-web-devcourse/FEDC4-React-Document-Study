# 객체 state
state 값을 변경하는 것은 기술적으로 가능은 하지만 렌더링 트리거 기능을 위해선 state가 읽기 전용인 것처럼 다뤄야 한다.

state가 객체라면 setter 함수에 새롭게 생성한 객체를 전달함으로써 업데이트 시켜야 재렌더링이 일어날 수 있다.

이는 state에만 해당되며 지역 변수를 변경하는 local mutation은 허용된다.

spread 연산자를 통해 이전 state 값 기반의 새로운 객체를 편하게 만들 수 있다. 단, spread 연산자는 얕은 복사를 기반으로 동작하므로 중첩된 객체에선 여러 번 사용해야 한다.

immer는 `Proxy` 타입을 가진 객체를 통해 state 값 변경 과정을 기록해서 새로운 state 객체를 생성해주는 라이브러리이다.
객체가 중첩되어 있는 경우에 유용하다.

React에서 이렇게 state의 변경을 허용하지 않는 이유는 몇 가지가 있다.
- 디버깅: 한 렌더링 과정 내에서 state 값이 동일함을 보장할 수 있다. 때문에 렌더링 사이에서의 state 변화만 집중할 수 있다.
- 최적화: React는 이전 props나 state가 변화가 없다면 렌더링을 최적화한다. 이때 객체 비교를 참조 주소로만 하면 빠르게 비교할 수 있다.
- 새로운 기능: React는 state가 변경되지 않는다는 가정 하에 기능을 추가한다.
- 요구사항 변화: 이전 상태로 되돌아가는 기능이나 변화 내역을 조회하는 기능은 state의 이전 복사본을 이용해 쉽게 구현할 수 있다.
- 더 간단한 구현: 객체 state를 Proxy로 감싸서 정의한다던지 등의 복잡한 작업을 하지 않아도 된다.